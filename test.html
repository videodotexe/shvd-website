<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta 
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <title>Grattachecca</title>
    <link href="main.css" rel="stylesheet" />
  </head>
  <body>
    <div class="scrollable-body">
      <div class="sideburn sideburn-left"></div>
      <div class="content-box">
        <div class="section-welcome">
          <img src="./media/images/01-01-34_c.jpg" class="rounded-corners"/>
          <div>
            <div class="logo-title">
              <img src="./media/logo.svg"/>
            </div>
            <div class="subtitle">/&#716;grat.ta&#712;kek.ka/</div>
            <div>
              An animated slice of life short on summer and brotherly love
            </div>
          </div>
        </div>
        
        <div class="gap"></div>
        

        <div class="section-synopsis">
          <img class="gio" src="./media/images/gio/01-02-15_c.png"/>
          <div>
            <div class="title-small">Synopsis</div>
            <div>
              Gio, a teenage girl, and Marco, her big brother and guardian,
              live together alone in a city they don’t belong to. Summer's
              scorching sun prompts Marco on a quest to make the heat bearable.
            </div>
          </div>
          <img class="marco" src="./media/images/marco/01-02-18_c.png"/>
        </div>
        <div class="gap"></div>
        
        <div class="section-setting">
          <div>
            <div class="title-small">Setting</div>
            <div>
              A port city on the Southern European coast. The 60s, where
              fridges were common but not AC.
            </div>
          </div>
          <img class="rounded-corners" src="./media/images/01-01-31_c.jpg"/>
        </div>
        
        <div class="gap"></div>
        
        <div class="section-characters">
          <div class="title"><span>Characters</span></div>
          <div class="gio single-character">
            <div class="gio-first-row">
              <img class="gio-sitting" src="./media/images/gio/gio_sitting.jpg" >
              <div>
                <div class="subtitle-bold">Gio</div>
                <div>
                  Distinctly quieter since moving to their new city, Gio longs
                  for the comfort of home, both cooler and more familiar. Despite
                  her strong and fierce exterior to the world, her love for Marco
                  keeps them both grounded in their new home away from home.
                </div>
              </div>
              <img class="gio-crosslegged" src="./media/images/gio/gio_crosslegged.jpg" />
            </div>
            <div class="gio-second-row">
              <img class="gio-crossarms" src="./media/images/gio/gio_crossarms.jpg" />
              <img class="gio-couch" src="./media/images/gio/gio_couch.jpg" />
            </div>
          </div>
          <div class="marco single-character">
            <div class="marco-first-row">
              <img class="marco-sweating" src="./media/images/marco/marco_sweating.jpg" />
              <div>
                <div class="subtitle-bold">Marco</div>
                <div>
                  A long day of work in the sweltering heat of a nearby hotel
                  restaurant doesn’t stop Marco’s from putting his sister first.
                  Endlessly stoic, pragmatic, and resourceful, he helps remind
                  Gio that life doesn’t always have to be so hard.
                </div>
              </div>
              <img class="marco-sitting" src="./media/images/marco/marco_sitting.jpg" />
            </div>
            <div class="marco-second-row">
              <img class="marco-standing-front" src="./media/images/marco/marco_standing_front.jpg" />
              <img class="marco-reading-map" src="./media/images/marco/marco_reading_map.jpg" />
              <img class="marco-standing-back" src="./media/images/marco/marco_standing_back.jpg" />
            </div>
          </div>
        </div>
        
        <div class="gap"></div>
        
        <div class="section-living-room">
          <div class="rounded-corners">
            <img src="./media/images/01-01-29_c.jpg">
          </div>
        </div>
        
        <div class="gap"></div>
        
        <div class="section-contacts">
          <div class="subtitle-bold">Grattachecca is in development</div>
          <div class="normal-text-bold">Would you like to be kept updated?</div>
          <div>
            We are working hard to bring Grattachecca to life, <br />
            subscribe to the newsletter to stay in the loop.
          </div>
          <div class="newsletter">
            <input type="button" value="Subscribe..." onclick="showNewsletterForm()" />
          </div>
          <div class="normal-text-bold">Alternatively, get in touch!</div>
          <div>
            Do you have any questions, proposals, or comments? <br />
            Our inbox is always open.
          </div>
          <div>
            <input type="button" value="info@grattachecca.net"/>
          </div>
        </div>
        
        <div class="gap"></div>

        <div class="section-team">
          <div class="title"><span>Meet the team</span></div>
          
          <div class="team-member">
            <img src="./media/images/people/person.png" />
            <div>
              <div class="subtitle-bold">Giulio Martella</div>
              <div class="small-subtitle">aka videodotexe</div>
              <div class="socials">
                <a href="x.com"><img src="./media/images/icons/twitter_badge.png" /></a>
                <a href="instagram.com"><img src="./media/images/icons/instagram_badge.png" /></a>
                <a href="mailto:email@example.com"><img src="./media/images/icons/mail_badge.png" /></a>
              </div>
              <div class="normal-text-bold">Director</div>
              <div>Dignissimos delectus excepturi maxime laudantium sit. Et molestiae quis mollitia est enim dolorem quia. Rerum fuga aut est ea magnam porro voluptates.</div>
            </div>
          </div>
          
          <div class="team-member">
            <img src="./media/images/people/person.png" />
            <div>
              <div class="subtitle-bold">Oliver Hulme</div>
              <div class="socials">
                <a href="mailto:email@example.com"><img src="./media/images/icons/mail_badge.png" /></a>
              </div>
              <div class="normal-text-bold">Producer</div>
              <div>Dignissimos delectus excepturi maxime laudantium sit. Et molestiae quis mollitia est enim dolorem quia. Rerum fuga aut est ea magnam porro voluptates.</div>
            </div>
          </div>

          <div class="team-member">
            <img src="./media/images/people/person.png" />
            <div>
              <div class="subtitle-bold">Álvaro Xoán Vidal Pazos</div>
              <div class="small-subtitle">aka Alariko</div>
              <div class="socials">
                <a href="google.com"><img src="./media/images/icons/website_badge.png" /></a>
                <a href="x.com"><img src="./media/images/icons/twitter_badge.png" /></a>
                <a href="instagram.com"><img src="./media/images/icons/instagram_badge.png" /></a>
                <a href="mailto:email@example.com"><img src="./media/images/icons/mail_badge.png" /></a>
              </div>
              <div class="normal-text-bold">Environment visual designer</div>
              <div>Dignissimos delectus excepturi maxime laudantium sit. Et molestiae quis mollitia est enim dolorem quia. Rerum fuga aut est ea magnam porro voluptates.</div>
            </div>
          </div>

          <div class="team-member">
            <img src="./media/images/people/person.png" />
            <div>
              <div class="subtitle-bold">Eden Chyun</div>
              <div class="small-subtitle">aka Tulli</div>
              <div class="socials">
                <a href="google.com"><img src="./media/images/icons/website_badge.png" /></a>
                <a href="x.com"><img src="./media/images/icons/twitter_badge.png" /></a>
                <a href="instagram.com"><img src="./media/images/icons/instagram_badge.png" /></a>
                <a href="mailto:email@example.com"><img src="./media/images/icons/mail_badge.png" /></a>
              </div>
              <div class="normal-text-bold">Characters visual designer</div>
              <div>Dignissimos delectus excepturi maxime laudantium sit. Et molestiae quis mollitia est enim dolorem quia. Rerum fuga aut est ea magnam porro voluptates.</div>
            </div>
          </div>

          <div class="team-member">
            <img src="./media/images/people/person.png" />
            <div>
              <div class="subtitle-bold">Howard Kung</div>
              <div class="small-subtitle">aka Bixels</div>
              <div class="socials">
                <a href="google.com"><img src="./media/images/icons/website_badge.png" /></a>
                <a href="x.com"><img src="./media/images/icons/twitter_badge.png" /></a>
                <a href="instagram.com"><img src="./media/images/icons/instagram_badge.png" /></a>
                <a href="mailto:email@example.com"><img src="./media/images/icons/mail_badge.png" /></a>
              </div>
              <div class="normal-text-bold">Story artist</div>
              <div>Dignissimos delectus excepturi maxime laudantium sit. Et molestiae quis mollitia est enim dolorem quia. Rerum fuga aut est ea magnam porro voluptates.</div>
            </div>
          </div>

          <div class="team-member">
            <img src="./media/images/people/person.png" />
            <div>
              <div class="subtitle-bold">Federica Vommaro</div>
              <div class="small-subtitle">aka PHYSALIArt</div>
              <div class="socials">
                <a href="instagram.com"><img src="./media/images/icons/instagram_badge.png" /></a>
                <a href="mailto:email@example.com"><img src="./media/images/icons/mail_badge.png" /></a>
              </div>
              <div class="normal-text-bold">Graphic Designer</div>
              <div>Dignissimos delectus excepturi maxime laudantium sit. Et molestiae quis mollitia est enim dolorem quia. Rerum fuga aut est ea magnam porro voluptates.</div>
            </div>
          </div>

        </div>

      </div>
      <div class="sideburn sideburn-right"></div>
    </div>

    <script>
      const SUPPORT_EMAIL = `<a href="mailto:tech@grattachecca.net">tech@grattachecca.net</a>`;
      let scrollHeight = 0;

      function dialog(name, contents, error=false) {
        const element = document.createElement("div");
        element.classList.add("dialog");
        if (error) element.classList.add("error-dialog");
        element.id = name
        element.innerHTML = `
          <div>
            <div class="dismiss" onclick="dismissDialog('${name}')">
              &Cross;
            </div>
            ${contents}
          </div>
        `;
        document.body.appendChild(element);
        setScrolling(false);
        return element;
      }

      function dismissDialog(dialogId) {
        const dialog = document.getElementById(dialogId);
        dialog.remove();
        setScrolling(true);
      }

      function setScrolling(scrolling) {
        if(scrolling) {
          document.body.style.position = "relative";
          document.body.style.top = "0px";
          window.scroll(0, scrollHeight);
          document.body.style.overflowY = "auto";
        } else {
          scrollHeight = window.scrollY;
          window.scroll(0, 0);
          document.body.style.position = "fixed";
          document.body.style.top = `-${scrollHeight}px`;
          document.body.style.overflowY = "scroll";
        }
      }

      function showNewsletterForm() {
        const emailElemId = "newsletter-form-email";
        const dialogId = "newsletter-form";
        const submitElemId = "newsletter-submit-btn";
        dialog(dialogId, `
          <div class="subtitle-bold">Newsletter subscription</div>
          <form onsubmit="return submitEmailAddress('${emailElemId}', '${dialogId}', '${submitElemId}');">
            <input type="email" placeholder="Email" id="${emailElemId}" />
            <input type="submit" value="Subscribe" id="${submitElemId}"/>
          </form>
          <div class="terms">
            By clicking subscribe you accept this, that and this other thing
            according to our privacy policy. You will be able to unsubscribe at
            any time.
          </div>
        `);
      }

      function submitEmailAddress(emailElemId, dialogId, submitElemId) {

        submitElem = document.getElementById(submitElemId);
        submitElem.style.width = `${submitElem.offsetWidth}px`;
        submitElem.style.height = `${submitElem.offsetHeight}px`;
        submitElem.value = "⏳";

        const apiUrl = "https://api.grattachecca.net/subscribe";
        const emailElem = document.getElementById(emailElemId);
        const email = emailElem.value;
        const body = {email: email};
        fetch(apiUrl, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(body),
        }).then(res => {
          dismissDialog(dialogId);
          if(res.status == 409) {
            dialog(
              "known-email",
              `
                <div class="subtitle-bold">Email already registered</div>
                <div style="padding-bottom: 0.7em;">An email cannot be registered twice!</div>
                <span>
                  <div>If this is unexpected, write to: ${SUPPORT_EMAIL}</div>
                </span>
              `, 
              true
            );
          } else if (res.ok) {
            dialog("registration-success", `
              <div class="subtitle-bold">Thank you!</div>
              <div>Your email address has been succesfully submitted, you'll receive a confirmation email soon.</div>
            `);
          } else {
            dialog(
              "unknown-error-popup",
              `
                <div class="subtitle-bold">${res.status} error</div>
                <div style="padding-bottom: 0.7em;">The server returned an unexpected error!</div>
                <span>
                  <div>Please flag this to: ${SUPPORT_EMAIL}</div>
                </span>
              `,
              true
            );
          }
        }).catch(res => {
          dismissDialog(dialogId);
          dialog(
            "unknown-error-popup",
            `
              <div class="subtitle-bold">Unknown communication error</div>
              <div style="padding-bottom: 0.7em;">It was impossible to communicate with the server! Try again later.</div>
              <span>
                <div>Please flag this to: ${SUPPORT_EMAIL}</div>
              </span>
            `,
            true
          );
        });

        return false;
      }
    </script>
  </body>
</html>